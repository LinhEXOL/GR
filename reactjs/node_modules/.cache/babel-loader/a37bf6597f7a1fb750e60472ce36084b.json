{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (it) return (it = it.call(o)).next.bind(it);\n  if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n    if (it) o = it;\n    var i = 0;\n    return function () {\n      if (i >= o.length) return {\n        done: true\n      };\n      return {\n        done: false,\n        value: o[i++]\n      };\n    };\n  }\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n  return arr2;\n}\nimport * as React from 'react';\nimport Icon from '../components/Icon';\nimport NavigationBar from '../components/NavigationBar';\nimport ToolBar from '../components/ToolBar';\nimport i18n from '../i18n';\nimport DividerPlugin from '../plugins/divider';\nimport Emitter, { globalEmitter } from '../share/emitter';\nimport { initialSelection } from '../share/var';\nimport getDecorated from '../utils/decorate';\nimport mergeConfig from '../utils/mergeConfig';\nimport { getLineAndCol, isKeyMatch, isPromise } from '../utils/tool';\nimport getUploadPlaceholder from '../utils/uploadPlaceholder';\nimport defaultConfig from './defaultConfig';\nimport { HtmlRender } from './preview';\nvar Editor = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(Editor, _React$Component);\n\n  /**\n   * Register plugin\n   * @param {any} comp Plugin component\n   * @param {any} config Other configs\n   */\n  Editor.use = function use(comp, config) {\n    if (config === void 0) {\n      config = {};\n    }\n\n    // Check for duplicate plugins\n    for (var i = 0; i < Editor.plugins.length; i++) {\n      if (Editor.plugins[i].comp === comp) {\n        Editor.plugins.splice(i, 1, {\n          comp: comp,\n          config: config\n        });\n        return;\n      }\n    }\n    Editor.plugins.push({\n      comp: comp,\n      config: config\n    });\n  }\n  /**\n   * Unregister plugin\n   * @param {any} comp Plugin component\n   */;\n\n  Editor.unuse = function unuse(comp) {\n    for (var i = 0; i < Editor.plugins.length; i++) {\n      if (Editor.plugins[i].comp === comp) {\n        Editor.plugins.splice(i, 1);\n        return;\n      }\n    }\n  }\n  /**\n   * Unregister all plugins\n   * @param {any} comp Plugin component\n   */;\n\n  Editor.unuseAll = function unuseAll() {\n    Editor.plugins = [];\n  }\n  /**\n   * Locales\n   */;\n\n  function Editor(props) {\n    var _this;\n    _this = _React$Component.call(this, props) || this;\n    _this.nodeMdText = /*#__PURE__*/React.createRef();\n    _this.nodeMdPreview = /*#__PURE__*/React.createRef();\n    _this.nodeMdPreviewWrapper = /*#__PURE__*/React.createRef();\n    _this.hasContentChanged = true;\n    _this.scrollScale = 1;\n    _this.isSyncingScroll = false;\n    _this.shouldSyncScroll = 'md';\n    _this.keyboardListeners = [];\n    _this.emitter = new Emitter();\n    _this.config = mergeConfig(defaultConfig, _this.props.config, _this.props);\n    _this.state = {\n      text: (_this.props.value || _this.props.defaultValue || '').replace(/↵/g, '\\n'),\n      html: '',\n      view: _this.config.view || defaultConfig.view,\n      fullScreen: false,\n      plugins: _this.getPlugins()\n    };\n    if (_this.config.canView && !_this.config.canView.menu) {\n      _this.state.view.menu = false;\n    }\n    _this.nodeMdText = /*#__PURE__*/React.createRef();\n    _this.nodeMdPreviewWrapper = /*#__PURE__*/React.createRef();\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.handlePaste = _this.handlePaste.bind(_assertThisInitialized(_this));\n    _this.handleDrop = _this.handleDrop.bind(_assertThisInitialized(_this));\n    _this.handleToggleMenu = _this.handleToggleMenu.bind(_assertThisInitialized(_this));\n    _this.handleKeyDown = _this.handleKeyDown.bind(_assertThisInitialized(_this));\n    _this.handleEditorKeyDown = _this.handleEditorKeyDown.bind(_assertThisInitialized(_this));\n    _this.handleLocaleUpdate = _this.handleLocaleUpdate.bind(_assertThisInitialized(_this));\n    _this.handleFocus = _this.handleFocus.bind(_assertThisInitialized(_this));\n    _this.handleBlur = _this.handleBlur.bind(_assertThisInitialized(_this));\n    _this.handleInputScroll = _this.handleSyncScroll.bind(_assertThisInitialized(_this), 'md');\n    _this.handlePreviewScroll = _this.handleSyncScroll.bind(_assertThisInitialized(_this), 'html');\n    return _this;\n  }\n  var _proto = Editor.prototype;\n  _proto.componentDidMount = function componentDidMount() {\n    var text = this.state.text;\n    this.renderHTML(text);\n    globalEmitter.on(globalEmitter.EVENT_LANG_CHANGE, this.handleLocaleUpdate); // init i18n\n\n    i18n.setUp();\n  };\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    globalEmitter.off(globalEmitter.EVENT_LANG_CHANGE, this.handleLocaleUpdate);\n  };\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    if (typeof this.props.value !== 'undefined' && this.props.value !== this.state.text) {\n      var value = this.props.value;\n      if (typeof value !== 'string') {\n        value = String(value).toString();\n      }\n      value = value.replace(/↵/g, '\\n');\n      if (this.state.text !== value) {\n        this.setState({\n          text: value\n        });\n        this.renderHTML(value);\n      }\n    }\n    if (prevProps.plugins !== this.props.plugins) {\n      this.setState({\n        plugins: this.getPlugins()\n      });\n    }\n  };\n  _proto.getPlugins = function getPlugins() {\n    var _this2 = this;\n    var plugins = [];\n    if (this.props.plugins) {\n      // If plugins option is configured, use only specified plugins\n      var addToPlugins = function addToPlugins(name) {\n        if (name === DividerPlugin.pluginName) {\n          plugins.push({\n            comp: DividerPlugin,\n            config: {}\n          });\n          return;\n        }\n        for (var _iterator = _createForOfIteratorHelperLoose(Editor.plugins), _step; !(_step = _iterator()).done;) {\n          var it = _step.value;\n          if (it.comp.pluginName === name) {\n            plugins.push(it);\n            return;\n          }\n        }\n      };\n      for (var _iterator2 = _createForOfIteratorHelperLoose(this.props.plugins), _step2; !(_step2 = _iterator2()).done;) {\n        var name = _step2.value;\n\n        // Special handling of fonts to ensure backward compatibility\n        if (name === 'fonts') {\n          addToPlugins('font-bold');\n          addToPlugins('font-italic');\n          addToPlugins('font-underline');\n          addToPlugins('font-strikethrough');\n          addToPlugins('list-unordered');\n          addToPlugins('list-ordered');\n          addToPlugins('block-quote');\n          addToPlugins('block-wrap');\n          addToPlugins('block-code-inline');\n          addToPlugins('block-code-block');\n        } else {\n          addToPlugins(name);\n        }\n      }\n    } else {\n      // Use all registered plugins\n      plugins = [].concat(Editor.plugins);\n    }\n    var result = {};\n    plugins.forEach(function (it) {\n      if (typeof result[it.comp.align] === 'undefined') {\n        result[it.comp.align] = [];\n      }\n      result[it.comp.align].push( /*#__PURE__*/React.createElement(it.comp, {\n        editor: _this2,\n        editorConfig: _this2.config,\n        config: _extends({}, it.comp.defaultConfig || {}, it.config || {}),\n        key: it.comp.pluginName\n      }));\n    });\n    return result;\n  } // sync left and right section's scroll\n  ;\n\n  _proto.handleSyncScroll = function handleSyncScroll(type, e) {\n    var _this3 = this;\n\n    // prevent loop\n    if (type !== this.shouldSyncScroll) {\n      return;\n    } // trigger events\n\n    if (this.props.onScroll) {\n      this.props.onScroll(e, type);\n    }\n    this.emitter.emit(this.emitter.EVENT_SCROLL, e, type); // should sync scroll?\n\n    var _this$config$syncScro = this.config.syncScrollMode,\n      syncScrollMode = _this$config$syncScro === void 0 ? [] : _this$config$syncScro;\n    if (!syncScrollMode.includes(type === 'md' ? 'rightFollowLeft' : 'leftFollowRight')) {\n      return;\n    }\n    if (this.hasContentChanged && this.nodeMdText.current && this.nodeMdPreviewWrapper.current) {\n      // 计算出左右的比例\n      this.scrollScale = this.nodeMdText.current.scrollHeight / this.nodeMdPreviewWrapper.current.scrollHeight;\n      this.hasContentChanged = false;\n    }\n    if (!this.isSyncingScroll) {\n      this.isSyncingScroll = true;\n      requestAnimationFrame(function () {\n        if (_this3.nodeMdText.current && _this3.nodeMdPreviewWrapper.current) {\n          if (type === 'md') {\n            // left to right\n            _this3.nodeMdPreviewWrapper.current.scrollTop = _this3.nodeMdText.current.scrollTop / _this3.scrollScale;\n          } else {\n            // right to left\n            _this3.nodeMdText.current.scrollTop = _this3.nodeMdPreviewWrapper.current.scrollTop * _this3.scrollScale;\n          }\n        }\n        _this3.isSyncingScroll = false;\n      });\n    }\n  };\n  _proto.renderHTML = function renderHTML(markdownText) {\n    var _this4 = this;\n    if (!this.props.renderHTML) {\n      console.error('renderHTML props is required!');\n      return Promise.resolve();\n    }\n    var res = this.props.renderHTML(markdownText);\n    if (isPromise(res)) {\n      // @ts-ignore\n      return res.then(function (r) {\n        return _this4.setHtml(r);\n      });\n    }\n    if (typeof res === 'function') {\n      return this.setHtml(res());\n    }\n    return this.setHtml(res);\n  };\n  _proto.setHtml = function setHtml(html) {\n    var _this5 = this;\n    return new Promise(function (resolve) {\n      _this5.setState({\n        html: html\n      }, resolve);\n    });\n  };\n  _proto.handleToggleMenu = function handleToggleMenu() {\n    this.setView({\n      menu: !this.state.view.menu\n    });\n  };\n  _proto.handleFocus = function handleFocus(e) {\n    var onFocus = this.props.onFocus;\n    if (onFocus) {\n      onFocus(e);\n    }\n    this.emitter.emit(this.emitter.EVENT_FOCUS, e);\n  };\n  _proto.handleBlur = function handleBlur(e) {\n    var onBlur = this.props.onBlur;\n    if (onBlur) {\n      onBlur(e);\n    }\n    this.emitter.emit(this.emitter.EVENT_BLUR, e);\n  }\n  /**\n   * Text area change event\n   * @param {React.ChangeEvent} e\n   */;\n\n  _proto.handleChange = function handleChange(e) {\n    e.persist();\n    var value = e.target.value; // 触发内部事件\n\n    this.setText(value, e);\n  }\n  /**\n   * Listen paste event to support paste images\n   */;\n\n  _proto.handlePaste = function handlePaste(e) {\n    if (!this.config.allowPasteImage || !this.config.onImageUpload) {\n      return;\n    }\n    var event = e.nativeEvent; // @ts-ignore\n\n    var items = (event.clipboardData || window.clipboardData).items;\n    if (items) {\n      e.preventDefault();\n      this.uploadWithDataTransfer(items);\n    }\n  } // Drag images to upload\n  ;\n\n  _proto.handleDrop = function handleDrop(e) {\n    if (!this.config.onImageUpload) {\n      return;\n    }\n    var event = e.nativeEvent;\n    if (!event.dataTransfer) {\n      return;\n    }\n    var items = event.dataTransfer.items;\n    if (items) {\n      e.preventDefault();\n      this.uploadWithDataTransfer(items);\n    }\n  };\n  _proto.handleEditorKeyDown = function handleEditorKeyDown(e) {\n    var _this6 = this;\n    var keyCode = e.keyCode,\n      key = e.key,\n      currentTarget = e.currentTarget;\n    if (keyCode === 13 || key === 'Enter') {\n      var _text = e.currentTarget.value;\n      var curPos = currentTarget.selectionStart;\n      var lineInfo = getLineAndCol(_text, curPos);\n      var emptyCurrentLine = function emptyCurrentLine() {\n        var newValue = currentTarget.value.substr(0, curPos - lineInfo.curLine.length) + currentTarget.value.substr(curPos);\n        _this6.setText(newValue, undefined, {\n          start: curPos - lineInfo.curLine.length,\n          end: curPos - lineInfo.curLine.length\n        });\n        e.preventDefault();\n      };\n      var addSymbol = function addSymbol(symbol) {\n        _this6.insertText(\"\\n\" + symbol, false, {\n          start: symbol.length + 1,\n          end: symbol.length + 1\n        });\n        e.preventDefault();\n      }; // Enter key, check previous line\n\n      var isSymbol = lineInfo.curLine.match(/^(\\s?)([-*]) /);\n      if (isSymbol) {\n        if (/^(\\s?)([-*]) $/.test(lineInfo.curLine)) {\n          emptyCurrentLine();\n          return;\n        }\n        addSymbol(isSymbol[0]);\n        return;\n      }\n      var isOrderList = lineInfo.curLine.match(/^(\\s?)(\\d+)\\. /);\n      if (isOrderList) {\n        if (/^(\\s?)(\\d+)\\. $/.test(lineInfo.curLine)) {\n          emptyCurrentLine();\n          return;\n        }\n        var toInsert = \"\" + isOrderList[1] + (parseInt(isOrderList[2], 10) + 1) + \". \";\n        addSymbol(toInsert);\n      }\n    }\n  } // Handle language change\n  ;\n\n  _proto.handleLocaleUpdate = function handleLocaleUpdate() {\n    this.forceUpdate();\n  }\n  /**\n   * Get elements\n   */;\n\n  _proto.getMdElement = function getMdElement() {\n    return this.nodeMdText.current;\n  };\n  _proto.getHtmlElement = function getHtmlElement() {\n    return this.nodeMdPreviewWrapper.current;\n  }\n  /**\n   * Clear selected\n   */;\n\n  _proto.clearSelection = function clearSelection() {\n    if (this.nodeMdText.current) {\n      this.nodeMdText.current.setSelectionRange(0, 0, 'none');\n    }\n  }\n  /**\n   * Get selected\n   * @return {Selection}\n   */;\n\n  _proto.getSelection = function getSelection() {\n    var source = this.nodeMdText.current;\n    if (!source) {\n      return _extends({}, initialSelection);\n    }\n    var start = source.selectionStart;\n    var end = source.selectionEnd;\n    var text = (source.value || '').slice(start, end);\n    return {\n      start: start,\n      end: end,\n      text: text\n    };\n  }\n  /**\n   * Set selected\n   * @param {Selection} to\n   */;\n\n  _proto.setSelection = function setSelection(to) {\n    if (this.nodeMdText.current) {\n      this.nodeMdText.current.setSelectionRange(to.start, to.end, 'forward');\n      this.nodeMdText.current.focus();\n    }\n  }\n  /**\n   * Insert markdown text\n   * @param type\n   * @param option\n   */;\n\n  _proto.insertMarkdown = function insertMarkdown(type, option) {\n    if (option === void 0) {\n      option = {};\n    }\n    var curSelection = this.getSelection();\n    var decorateOption = option ? _extends({}, option) : {};\n    if (type === 'image') {\n      decorateOption = _extends({}, decorateOption, {\n        target: option.target || curSelection.text || '',\n        imageUrl: option.imageUrl || this.config.imageUrl\n      });\n    }\n    if (type === 'link') {\n      decorateOption = _extends({}, decorateOption, {\n        linkUrl: this.config.linkUrl\n      });\n    }\n    if (type === 'tab' && curSelection.start !== curSelection.end) {\n      var curLineStart = this.getMdValue().slice(0, curSelection.start).lastIndexOf('\\n') + 1;\n      this.setSelection({\n        start: curLineStart,\n        end: curSelection.end\n      });\n    }\n    var decorate = getDecorated(curSelection.text, type, decorateOption);\n    var text = decorate.text;\n    var selection = decorate.selection;\n    if (decorate.newBlock) {\n      var startLineInfo = getLineAndCol(this.getMdValue(), curSelection.start);\n      var col = startLineInfo.col,\n        curLine = startLineInfo.curLine;\n      if (col > 0 && curLine.length > 0) {\n        text = \"\\n\" + text;\n        if (selection) {\n          selection.start++;\n          selection.end++;\n        }\n      }\n      var afterText = startLineInfo.afterText;\n      if (curSelection.start !== curSelection.end) {\n        afterText = getLineAndCol(this.getMdValue(), curSelection.end).afterText;\n      }\n      if (afterText.trim() !== '' && afterText.substr(0, 2) !== '\\n\\n') {\n        if (afterText.substr(0, 1) !== '\\n') {\n          text += '\\n';\n        }\n        text += '\\n';\n      }\n    }\n    this.insertText(text, true, selection);\n  }\n  /**\n   * Insert a placeholder, and replace it when the Promise resolved\n   * @param placeholder\n   * @param wait\n   */;\n\n  _proto.insertPlaceholder = function insertPlaceholder(placeholder, wait) {\n    var _this7 = this;\n    this.insertText(placeholder, true);\n    wait.then(function (str) {\n      var text = _this7.getMdValue().replace(placeholder, str);\n      _this7.setText(text);\n    });\n  }\n  /**\n   * Insert text\n   * @param {string} value The text will be insert\n   * @param {boolean} replaceSelected Replace selected text\n   * @param {Selection} newSelection New selection\n   */;\n\n  _proto.insertText = function insertText(value, replaceSelected, newSelection) {\n    if (value === void 0) {\n      value = '';\n    }\n    if (replaceSelected === void 0) {\n      replaceSelected = false;\n    }\n    var text = this.state.text;\n    var selection = this.getSelection();\n    var beforeContent = text.slice(0, selection.start);\n    var afterContent = text.slice(replaceSelected ? selection.end : selection.start, text.length);\n    this.setText(beforeContent + value + afterContent, undefined, newSelection ? {\n      start: newSelection.start + beforeContent.length,\n      end: newSelection.end + beforeContent.length\n    } : {\n      start: selection.start,\n      end: selection.start\n    });\n  }\n  /**\n   * Set text, and trigger onChange event\n   * @param {string} value\n   * @param {any} event\n   */;\n\n  _proto.setText = function setText(value, event, newSelection) {\n    var _this8 = this;\n    if (value === void 0) {\n      value = '';\n    }\n    var _this$config$onChange = this.config.onChangeTrigger,\n      onChangeTrigger = _this$config$onChange === void 0 ? 'both' : _this$config$onChange;\n    var text = value.replace(/↵/g, '\\n');\n    if (this.state.text === value) {\n      return;\n    }\n    this.setState({\n      text: text\n    });\n    if (this.props.onChange && (onChangeTrigger === 'both' || onChangeTrigger === 'beforeRender')) {\n      this.props.onChange({\n        text: text,\n        html: this.getHtmlValue()\n      }, event);\n    }\n    this.emitter.emit(this.emitter.EVENT_CHANGE, value, event, typeof event === 'undefined');\n    if (newSelection) {\n      setTimeout(function () {\n        return _this8.setSelection(newSelection);\n      });\n    }\n    if (!this.hasContentChanged) {\n      this.hasContentChanged = true;\n    }\n    var rendering = this.renderHTML(text);\n    if (onChangeTrigger === 'both' || onChangeTrigger === 'afterRender') {\n      rendering.then(function () {\n        if (_this8.props.onChange) {\n          _this8.props.onChange({\n            text: _this8.state.text,\n            html: _this8.getHtmlValue()\n          }, event);\n        }\n      });\n    }\n  }\n  /**\n   * Get text value\n   * @return {string}\n   */;\n\n  _proto.getMdValue = function getMdValue() {\n    return this.state.text;\n  }\n  /**\n   * Get rendered html\n   * @returns {string}\n   */;\n\n  _proto.getHtmlValue = function getHtmlValue() {\n    if (typeof this.state.html === 'string') {\n      return this.state.html;\n    }\n    if (this.nodeMdPreview.current) {\n      return this.nodeMdPreview.current.getHtml();\n    }\n    return '';\n  }\n  /**\n   * Listen keyboard events\n   */;\n\n  /**\n   * Listen keyboard events\n   * @param {KeyboardEventListener} data\n   */\n  _proto.onKeyboard = function onKeyboard(data) {\n    var _this9 = this;\n    if (Array.isArray(data)) {\n      data.forEach(function (it) {\n        return _this9.onKeyboard(it);\n      });\n      return;\n    }\n    if (!this.keyboardListeners.includes(data)) {\n      this.keyboardListeners.push(data);\n    }\n  }\n  /**\n   * Unlisten keyboard events\n   * @param {KeyboardEventListener} data\n   */;\n\n  _proto.offKeyboard = function offKeyboard(data) {\n    var _this10 = this;\n    if (Array.isArray(data)) {\n      data.forEach(function (it) {\n        return _this10.offKeyboard(it);\n      });\n      return;\n    }\n    var index = this.keyboardListeners.indexOf(data);\n    if (index >= 0) {\n      this.keyboardListeners.splice(index, 1);\n    }\n  };\n  _proto.handleKeyDown = function handleKeyDown(e) {\n    // 遍历监听数组，找找有没有被监听\n    for (var _iterator3 = _createForOfIteratorHelperLoose(this.keyboardListeners), _step3; !(_step3 = _iterator3()).done;) {\n      var it = _step3.value;\n      if (isKeyMatch(e, it)) {\n        e.preventDefault();\n        it.callback(e);\n        return;\n      }\n    } // 如果没有，触发默认事件\n\n    this.emitter.emit(this.emitter.EVENT_KEY_DOWN, e);\n  };\n  _proto.getEventType = function getEventType(event) {\n    switch (event) {\n      case 'change':\n        return this.emitter.EVENT_CHANGE;\n      case 'fullscreen':\n        return this.emitter.EVENT_FULL_SCREEN;\n      case 'viewchange':\n        return this.emitter.EVENT_VIEW_CHANGE;\n      case 'keydown':\n        return this.emitter.EVENT_KEY_DOWN;\n      case 'blur':\n        return this.emitter.EVENT_BLUR;\n      case 'focus':\n        return this.emitter.EVENT_FOCUS;\n      case 'scroll':\n        return this.emitter.EVENT_SCROLL;\n    }\n  }\n  /**\n   * Listen events\n   * @param {EditorEvent} event Event type\n   * @param {any} cb Callback\n   */;\n\n  _proto.on = function on(event, cb) {\n    var eventType = this.getEventType(event);\n    if (eventType) {\n      this.emitter.on(eventType, cb);\n    }\n  }\n  /**\n   * Unlisten events\n   * @param {EditorEvent} event Event type\n   * @param {any} cb Callback\n   */;\n\n  _proto.off = function off(event, cb) {\n    var eventType = this.getEventType(event);\n    if (eventType) {\n      this.emitter.off(eventType, cb);\n    }\n  }\n  /**\n   * Set view property\n   * Can show or hide: editor, preview, menu\n   * @param {object} to\n   */;\n\n  _proto.setView = function setView(to) {\n    var _this11 = this;\n    var newView = _extends({}, this.state.view, to);\n    this.setState({\n      view: newView\n    }, function () {\n      _this11.emitter.emit(_this11.emitter.EVENT_VIEW_CHANGE, newView);\n    });\n  }\n  /**\n   * Get view property\n   * @return {object}\n   */;\n\n  _proto.getView = function getView() {\n    return _extends({}, this.state.view);\n  }\n  /**\n   * Enter or exit full screen\n   * @param {boolean} enable\n   */;\n\n  _proto.fullScreen = function fullScreen(enable) {\n    var _this12 = this;\n    if (this.state.fullScreen !== enable) {\n      this.setState({\n        fullScreen: enable\n      }, function () {\n        _this12.emitter.emit(_this12.emitter.EVENT_FULL_SCREEN, enable);\n      });\n    }\n  }\n  /**\n   * Is full screen\n   * @return {boolean}\n   */;\n\n  _proto.isFullScreen = function isFullScreen() {\n    return this.state.fullScreen;\n  };\n  _proto.uploadWithDataTransfer = function uploadWithDataTransfer(items) {\n    var _this13 = this;\n    var onImageUpload = this.config.onImageUpload;\n    if (!onImageUpload) {\n      return;\n    }\n    var queue = [];\n    Array.prototype.forEach.call(items, function (it) {\n      if (it.kind === 'file' && it.type.includes('image')) {\n        var file = it.getAsFile();\n        if (file) {\n          var placeholder = getUploadPlaceholder(file, onImageUpload);\n          queue.push(Promise.resolve(placeholder.placeholder));\n          placeholder.uploaded.then(function (str) {\n            var text = _this13.getMdValue().replace(placeholder.placeholder, str);\n            var offset = str.length - placeholder.placeholder.length; // 计算出替换后的光标位置\n\n            var selection = _this13.getSelection();\n            _this13.setText(text, undefined, {\n              start: selection.start + offset,\n              end: selection.start + offset\n            });\n          });\n        }\n      } else if (it.kind === 'string' && it.type === 'text/plain') {\n        queue.push(new Promise(function (resolve) {\n          return it.getAsString(resolve);\n        }));\n      }\n    });\n    Promise.all(queue).then(function (res) {\n      var text = res.join('');\n      var selection = _this13.getSelection();\n      _this13.insertText(text, true, {\n        start: selection.start === selection.end ? text.length : 0,\n        end: text.length\n      });\n    });\n  };\n  _proto.render = function render() {\n    var _this14 = this;\n    var showHideMenu = this.config.canView && this.config.canView.hideMenu && !this.config.canView.menu;\n    var _this$state = this.state,\n      view = _this$state.view,\n      fullScreen = _this$state.fullScreen;\n    var getPluginAt = function getPluginAt(at) {\n      return _this14.state.plugins[at] || [];\n    };\n    var isShowMenu = !!view.menu;\n    var id = this.props.id;\n    var editorId = id ? id + \"_md\" : undefined;\n    var previewerId = id ? id + \"_html\" : undefined;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: id,\n      className: \"rc-md-editor \" + (fullScreen ? 'full' : ''),\n      style: this.props.style,\n      onKeyDown: this.handleKeyDown,\n      onDrop: this.handleDrop\n    }, /*#__PURE__*/React.createElement(NavigationBar, {\n      visible: isShowMenu,\n      left: getPluginAt('left'),\n      right: getPluginAt('right')\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"editor-container\"\n    }, showHideMenu && /*#__PURE__*/React.createElement(ToolBar, null, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-menu\",\n      title: isShowMenu ? 'hidden menu' : 'show menu',\n      onClick: this.handleToggleMenu\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"expand-\" + (isShowMenu ? 'less' : 'more')\n    }))), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"section sec-md \" + (view.md ? 'visible' : 'in-visible')\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      id: editorId,\n      ref: this.nodeMdText,\n      name: this.props.name || 'textarea',\n      autoFocus: this.props.autoFocus,\n      placeholder: this.props.placeholder,\n      readOnly: this.props.readOnly,\n      value: this.state.text,\n      className: \"section-container input \" + (this.config.markdownClass || ''),\n      wrap: \"hard\",\n      onChange: this.handleChange,\n      onScroll: this.handleInputScroll,\n      onMouseOver: function onMouseOver() {\n        return _this14.shouldSyncScroll = 'md';\n      },\n      onKeyDown: this.handleEditorKeyDown,\n      onPaste: this.handlePaste,\n      onFocus: this.handleFocus,\n      onBlur: this.handleBlur\n    })), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"section sec-html \" + (view.html ? 'visible' : 'in-visible')\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: previewerId,\n      className: \"section-container html-wrap\",\n      ref: this.nodeMdPreviewWrapper,\n      onMouseOver: function onMouseOver() {\n        return _this14.shouldSyncScroll = 'html';\n      },\n      onScroll: this.handlePreviewScroll\n    }, /*#__PURE__*/React.createElement(HtmlRender, {\n      html: this.state.html,\n      className: this.config.htmlClass,\n      ref: this.nodeMdPreview\n    })))));\n  };\n  return Editor;\n}(React.Component);\nEditor.plugins = [];\nEditor.addLocale = i18n.add.bind(i18n);\nEditor.useLocale = i18n.setCurrent.bind(i18n);\nEditor.getLocale = i18n.getCurrent.bind(i18n);\nexport default Editor;","map":{"version":3,"names":["_extends","_assertThisInitialized","_inheritsLoose","_createForOfIteratorHelperLoose","o","allowArrayLike","it","Symbol","iterator","call","next","bind","Array","isArray","_unsupportedIterableToArray","length","i","done","value","TypeError","minLen","_arrayLikeToArray","n","Object","prototype","toString","slice","constructor","name","from","test","arr","len","arr2","React","Icon","NavigationBar","ToolBar","i18n","DividerPlugin","Emitter","globalEmitter","initialSelection","getDecorated","mergeConfig","getLineAndCol","isKeyMatch","isPromise","getUploadPlaceholder","defaultConfig","HtmlRender","Editor","_React$Component","use","comp","config","plugins","splice","push","unuse","unuseAll","props","_this","nodeMdText","createRef","nodeMdPreview","nodeMdPreviewWrapper","hasContentChanged","scrollScale","isSyncingScroll","shouldSyncScroll","keyboardListeners","emitter","state","text","defaultValue","replace","html","view","fullScreen","getPlugins","canView","menu","handleChange","handlePaste","handleDrop","handleToggleMenu","handleKeyDown","handleEditorKeyDown","handleLocaleUpdate","handleFocus","handleBlur","handleInputScroll","handleSyncScroll","handlePreviewScroll","_proto","componentDidMount","renderHTML","on","EVENT_LANG_CHANGE","setUp","componentWillUnmount","off","componentDidUpdate","prevProps","String","setState","_this2","addToPlugins","pluginName","_iterator","_step","_iterator2","_step2","concat","result","forEach","align","createElement","editor","editorConfig","key","type","e","_this3","onScroll","emit","EVENT_SCROLL","_this$config$syncScro","syncScrollMode","includes","current","scrollHeight","requestAnimationFrame","scrollTop","markdownText","_this4","console","error","Promise","resolve","res","then","r","setHtml","_this5","setView","onFocus","EVENT_FOCUS","onBlur","EVENT_BLUR","persist","target","setText","allowPasteImage","onImageUpload","event","nativeEvent","items","clipboardData","window","preventDefault","uploadWithDataTransfer","dataTransfer","_this6","keyCode","currentTarget","_text","curPos","selectionStart","lineInfo","emptyCurrentLine","newValue","substr","curLine","undefined","start","end","addSymbol","symbol","insertText","isSymbol","match","isOrderList","toInsert","parseInt","forceUpdate","getMdElement","getHtmlElement","clearSelection","setSelectionRange","getSelection","source","selectionEnd","setSelection","to","focus","insertMarkdown","option","curSelection","decorateOption","imageUrl","linkUrl","curLineStart","getMdValue","lastIndexOf","decorate","selection","newBlock","startLineInfo","col","afterText","trim","insertPlaceholder","placeholder","wait","_this7","str","replaceSelected","newSelection","beforeContent","afterContent","_this8","_this$config$onChange","onChangeTrigger","onChange","getHtmlValue","EVENT_CHANGE","setTimeout","rendering","getHtml","onKeyboard","data","_this9","offKeyboard","_this10","index","indexOf","_iterator3","_step3","callback","EVENT_KEY_DOWN","getEventType","EVENT_FULL_SCREEN","EVENT_VIEW_CHANGE","cb","eventType","_this11","newView","getView","enable","_this12","isFullScreen","_this13","queue","kind","file","getAsFile","uploaded","offset","getAsString","all","join","render","_this14","showHideMenu","hideMenu","_this$state","getPluginAt","at","isShowMenu","id","editorId","previewerId","className","style","onKeyDown","onDrop","visible","left","right","title","onClick","md","ref","autoFocus","readOnly","markdownClass","wrap","onMouseOver","onPaste","htmlClass","Component","addLocale","add","useLocale","setCurrent","getLocale","getCurrent"],"sources":["C:/Users/admin/Downloads/GR2/reactjs/node_modules/react-markdown-editor-lite/esm/editor/index.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/extends\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/inheritsLoose\";\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport * as React from 'react';\nimport Icon from '../components/Icon';\nimport NavigationBar from '../components/NavigationBar';\nimport ToolBar from '../components/ToolBar';\nimport i18n from '../i18n';\nimport DividerPlugin from '../plugins/divider';\nimport Emitter, { globalEmitter } from '../share/emitter';\nimport { initialSelection } from '../share/var';\nimport getDecorated from '../utils/decorate';\nimport mergeConfig from '../utils/mergeConfig';\nimport { getLineAndCol, isKeyMatch, isPromise } from '../utils/tool';\nimport getUploadPlaceholder from '../utils/uploadPlaceholder';\nimport defaultConfig from './defaultConfig';\nimport { HtmlRender } from './preview';\n\nvar Editor = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(Editor, _React$Component);\n\n  /**\n   * Register plugin\n   * @param {any} comp Plugin component\n   * @param {any} config Other configs\n   */\n  Editor.use = function use(comp, config) {\n    if (config === void 0) {\n      config = {};\n    }\n\n    // Check for duplicate plugins\n    for (var i = 0; i < Editor.plugins.length; i++) {\n      if (Editor.plugins[i].comp === comp) {\n        Editor.plugins.splice(i, 1, {\n          comp: comp,\n          config: config\n        });\n        return;\n      }\n    }\n\n    Editor.plugins.push({\n      comp: comp,\n      config: config\n    });\n  }\n  /**\n   * Unregister plugin\n   * @param {any} comp Plugin component\n   */\n  ;\n\n  Editor.unuse = function unuse(comp) {\n    for (var i = 0; i < Editor.plugins.length; i++) {\n      if (Editor.plugins[i].comp === comp) {\n        Editor.plugins.splice(i, 1);\n        return;\n      }\n    }\n  }\n  /**\n   * Unregister all plugins\n   * @param {any} comp Plugin component\n   */\n  ;\n\n  Editor.unuseAll = function unuseAll() {\n    Editor.plugins = [];\n  }\n  /**\n   * Locales\n   */\n  ;\n\n  function Editor(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.nodeMdText = /*#__PURE__*/React.createRef();\n    _this.nodeMdPreview = /*#__PURE__*/React.createRef();\n    _this.nodeMdPreviewWrapper = /*#__PURE__*/React.createRef();\n    _this.hasContentChanged = true;\n    _this.scrollScale = 1;\n    _this.isSyncingScroll = false;\n    _this.shouldSyncScroll = 'md';\n    _this.keyboardListeners = [];\n    _this.emitter = new Emitter();\n    _this.config = mergeConfig(defaultConfig, _this.props.config, _this.props);\n    _this.state = {\n      text: (_this.props.value || _this.props.defaultValue || '').replace(/↵/g, '\\n'),\n      html: '',\n      view: _this.config.view || defaultConfig.view,\n      fullScreen: false,\n      plugins: _this.getPlugins()\n    };\n\n    if (_this.config.canView && !_this.config.canView.menu) {\n      _this.state.view.menu = false;\n    }\n\n    _this.nodeMdText = /*#__PURE__*/React.createRef();\n    _this.nodeMdPreviewWrapper = /*#__PURE__*/React.createRef();\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.handlePaste = _this.handlePaste.bind(_assertThisInitialized(_this));\n    _this.handleDrop = _this.handleDrop.bind(_assertThisInitialized(_this));\n    _this.handleToggleMenu = _this.handleToggleMenu.bind(_assertThisInitialized(_this));\n    _this.handleKeyDown = _this.handleKeyDown.bind(_assertThisInitialized(_this));\n    _this.handleEditorKeyDown = _this.handleEditorKeyDown.bind(_assertThisInitialized(_this));\n    _this.handleLocaleUpdate = _this.handleLocaleUpdate.bind(_assertThisInitialized(_this));\n    _this.handleFocus = _this.handleFocus.bind(_assertThisInitialized(_this));\n    _this.handleBlur = _this.handleBlur.bind(_assertThisInitialized(_this));\n    _this.handleInputScroll = _this.handleSyncScroll.bind(_assertThisInitialized(_this), 'md');\n    _this.handlePreviewScroll = _this.handleSyncScroll.bind(_assertThisInitialized(_this), 'html');\n    return _this;\n  }\n\n  var _proto = Editor.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var text = this.state.text;\n    this.renderHTML(text);\n    globalEmitter.on(globalEmitter.EVENT_LANG_CHANGE, this.handleLocaleUpdate); // init i18n\n\n    i18n.setUp();\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    globalEmitter.off(globalEmitter.EVENT_LANG_CHANGE, this.handleLocaleUpdate);\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    if (typeof this.props.value !== 'undefined' && this.props.value !== this.state.text) {\n      var value = this.props.value;\n\n      if (typeof value !== 'string') {\n        value = String(value).toString();\n      }\n\n      value = value.replace(/↵/g, '\\n');\n\n      if (this.state.text !== value) {\n        this.setState({\n          text: value\n        });\n        this.renderHTML(value);\n      }\n    }\n\n    if (prevProps.plugins !== this.props.plugins) {\n      this.setState({\n        plugins: this.getPlugins()\n      });\n    }\n  };\n\n  _proto.getPlugins = function getPlugins() {\n    var _this2 = this;\n\n    var plugins = [];\n\n    if (this.props.plugins) {\n      // If plugins option is configured, use only specified plugins\n      var addToPlugins = function addToPlugins(name) {\n        if (name === DividerPlugin.pluginName) {\n          plugins.push({\n            comp: DividerPlugin,\n            config: {}\n          });\n          return;\n        }\n\n        for (var _iterator = _createForOfIteratorHelperLoose(Editor.plugins), _step; !(_step = _iterator()).done;) {\n          var it = _step.value;\n\n          if (it.comp.pluginName === name) {\n            plugins.push(it);\n            return;\n          }\n        }\n      };\n\n      for (var _iterator2 = _createForOfIteratorHelperLoose(this.props.plugins), _step2; !(_step2 = _iterator2()).done;) {\n        var name = _step2.value;\n\n        // Special handling of fonts to ensure backward compatibility\n        if (name === 'fonts') {\n          addToPlugins('font-bold');\n          addToPlugins('font-italic');\n          addToPlugins('font-underline');\n          addToPlugins('font-strikethrough');\n          addToPlugins('list-unordered');\n          addToPlugins('list-ordered');\n          addToPlugins('block-quote');\n          addToPlugins('block-wrap');\n          addToPlugins('block-code-inline');\n          addToPlugins('block-code-block');\n        } else {\n          addToPlugins(name);\n        }\n      }\n    } else {\n      // Use all registered plugins\n      plugins = [].concat(Editor.plugins);\n    }\n\n    var result = {};\n    plugins.forEach(function (it) {\n      if (typeof result[it.comp.align] === 'undefined') {\n        result[it.comp.align] = [];\n      }\n\n      result[it.comp.align].push( /*#__PURE__*/React.createElement(it.comp, {\n        editor: _this2,\n        editorConfig: _this2.config,\n        config: _extends({}, it.comp.defaultConfig || {}, it.config || {}),\n        key: it.comp.pluginName\n      }));\n    });\n    return result;\n  } // sync left and right section's scroll\n  ;\n\n  _proto.handleSyncScroll = function handleSyncScroll(type, e) {\n    var _this3 = this;\n\n    // prevent loop\n    if (type !== this.shouldSyncScroll) {\n      return;\n    } // trigger events\n\n\n    if (this.props.onScroll) {\n      this.props.onScroll(e, type);\n    }\n\n    this.emitter.emit(this.emitter.EVENT_SCROLL, e, type); // should sync scroll?\n\n    var _this$config$syncScro = this.config.syncScrollMode,\n        syncScrollMode = _this$config$syncScro === void 0 ? [] : _this$config$syncScro;\n\n    if (!syncScrollMode.includes(type === 'md' ? 'rightFollowLeft' : 'leftFollowRight')) {\n      return;\n    }\n\n    if (this.hasContentChanged && this.nodeMdText.current && this.nodeMdPreviewWrapper.current) {\n      // 计算出左右的比例\n      this.scrollScale = this.nodeMdText.current.scrollHeight / this.nodeMdPreviewWrapper.current.scrollHeight;\n      this.hasContentChanged = false;\n    }\n\n    if (!this.isSyncingScroll) {\n      this.isSyncingScroll = true;\n      requestAnimationFrame(function () {\n        if (_this3.nodeMdText.current && _this3.nodeMdPreviewWrapper.current) {\n          if (type === 'md') {\n            // left to right\n            _this3.nodeMdPreviewWrapper.current.scrollTop = _this3.nodeMdText.current.scrollTop / _this3.scrollScale;\n          } else {\n            // right to left\n            _this3.nodeMdText.current.scrollTop = _this3.nodeMdPreviewWrapper.current.scrollTop * _this3.scrollScale;\n          }\n        }\n\n        _this3.isSyncingScroll = false;\n      });\n    }\n  };\n\n  _proto.renderHTML = function renderHTML(markdownText) {\n    var _this4 = this;\n\n    if (!this.props.renderHTML) {\n      console.error('renderHTML props is required!');\n      return Promise.resolve();\n    }\n\n    var res = this.props.renderHTML(markdownText);\n\n    if (isPromise(res)) {\n      // @ts-ignore\n      return res.then(function (r) {\n        return _this4.setHtml(r);\n      });\n    }\n\n    if (typeof res === 'function') {\n      return this.setHtml(res());\n    }\n\n    return this.setHtml(res);\n  };\n\n  _proto.setHtml = function setHtml(html) {\n    var _this5 = this;\n\n    return new Promise(function (resolve) {\n      _this5.setState({\n        html: html\n      }, resolve);\n    });\n  };\n\n  _proto.handleToggleMenu = function handleToggleMenu() {\n    this.setView({\n      menu: !this.state.view.menu\n    });\n  };\n\n  _proto.handleFocus = function handleFocus(e) {\n    var onFocus = this.props.onFocus;\n\n    if (onFocus) {\n      onFocus(e);\n    }\n\n    this.emitter.emit(this.emitter.EVENT_FOCUS, e);\n  };\n\n  _proto.handleBlur = function handleBlur(e) {\n    var onBlur = this.props.onBlur;\n\n    if (onBlur) {\n      onBlur(e);\n    }\n\n    this.emitter.emit(this.emitter.EVENT_BLUR, e);\n  }\n  /**\n   * Text area change event\n   * @param {React.ChangeEvent} e\n   */\n  ;\n\n  _proto.handleChange = function handleChange(e) {\n    e.persist();\n    var value = e.target.value; // 触发内部事件\n\n    this.setText(value, e);\n  }\n  /**\n   * Listen paste event to support paste images\n   */\n  ;\n\n  _proto.handlePaste = function handlePaste(e) {\n    if (!this.config.allowPasteImage || !this.config.onImageUpload) {\n      return;\n    }\n\n    var event = e.nativeEvent; // @ts-ignore\n\n    var items = (event.clipboardData || window.clipboardData).items;\n\n    if (items) {\n      e.preventDefault();\n      this.uploadWithDataTransfer(items);\n    }\n  } // Drag images to upload\n  ;\n\n  _proto.handleDrop = function handleDrop(e) {\n    if (!this.config.onImageUpload) {\n      return;\n    }\n\n    var event = e.nativeEvent;\n\n    if (!event.dataTransfer) {\n      return;\n    }\n\n    var items = event.dataTransfer.items;\n\n    if (items) {\n      e.preventDefault();\n      this.uploadWithDataTransfer(items);\n    }\n  };\n\n  _proto.handleEditorKeyDown = function handleEditorKeyDown(e) {\n    var _this6 = this;\n\n    var keyCode = e.keyCode,\n        key = e.key,\n        currentTarget = e.currentTarget;\n\n    if (keyCode === 13 || key === 'Enter') {\n      var _text = e.currentTarget.value;\n      var curPos = currentTarget.selectionStart;\n      var lineInfo = getLineAndCol(_text, curPos);\n\n      var emptyCurrentLine = function emptyCurrentLine() {\n        var newValue = currentTarget.value.substr(0, curPos - lineInfo.curLine.length) + currentTarget.value.substr(curPos);\n\n        _this6.setText(newValue, undefined, {\n          start: curPos - lineInfo.curLine.length,\n          end: curPos - lineInfo.curLine.length\n        });\n\n        e.preventDefault();\n      };\n\n      var addSymbol = function addSymbol(symbol) {\n        _this6.insertText(\"\\n\" + symbol, false, {\n          start: symbol.length + 1,\n          end: symbol.length + 1\n        });\n\n        e.preventDefault();\n      }; // Enter key, check previous line\n\n\n      var isSymbol = lineInfo.curLine.match(/^(\\s?)([-*]) /);\n\n      if (isSymbol) {\n        if (/^(\\s?)([-*]) $/.test(lineInfo.curLine)) {\n          emptyCurrentLine();\n          return;\n        }\n\n        addSymbol(isSymbol[0]);\n        return;\n      }\n\n      var isOrderList = lineInfo.curLine.match(/^(\\s?)(\\d+)\\. /);\n\n      if (isOrderList) {\n        if (/^(\\s?)(\\d+)\\. $/.test(lineInfo.curLine)) {\n          emptyCurrentLine();\n          return;\n        }\n\n        var toInsert = \"\" + isOrderList[1] + (parseInt(isOrderList[2], 10) + 1) + \". \";\n        addSymbol(toInsert);\n      }\n    }\n  } // Handle language change\n  ;\n\n  _proto.handleLocaleUpdate = function handleLocaleUpdate() {\n    this.forceUpdate();\n  }\n  /**\n   * Get elements\n   */\n  ;\n\n  _proto.getMdElement = function getMdElement() {\n    return this.nodeMdText.current;\n  };\n\n  _proto.getHtmlElement = function getHtmlElement() {\n    return this.nodeMdPreviewWrapper.current;\n  }\n  /**\n   * Clear selected\n   */\n  ;\n\n  _proto.clearSelection = function clearSelection() {\n    if (this.nodeMdText.current) {\n      this.nodeMdText.current.setSelectionRange(0, 0, 'none');\n    }\n  }\n  /**\n   * Get selected\n   * @return {Selection}\n   */\n  ;\n\n  _proto.getSelection = function getSelection() {\n    var source = this.nodeMdText.current;\n\n    if (!source) {\n      return _extends({}, initialSelection);\n    }\n\n    var start = source.selectionStart;\n    var end = source.selectionEnd;\n    var text = (source.value || '').slice(start, end);\n    return {\n      start: start,\n      end: end,\n      text: text\n    };\n  }\n  /**\n   * Set selected\n   * @param {Selection} to\n   */\n  ;\n\n  _proto.setSelection = function setSelection(to) {\n    if (this.nodeMdText.current) {\n      this.nodeMdText.current.setSelectionRange(to.start, to.end, 'forward');\n      this.nodeMdText.current.focus();\n    }\n  }\n  /**\n   * Insert markdown text\n   * @param type\n   * @param option\n   */\n  ;\n\n  _proto.insertMarkdown = function insertMarkdown(type, option) {\n    if (option === void 0) {\n      option = {};\n    }\n\n    var curSelection = this.getSelection();\n    var decorateOption = option ? _extends({}, option) : {};\n\n    if (type === 'image') {\n      decorateOption = _extends({}, decorateOption, {\n        target: option.target || curSelection.text || '',\n        imageUrl: option.imageUrl || this.config.imageUrl\n      });\n    }\n\n    if (type === 'link') {\n      decorateOption = _extends({}, decorateOption, {\n        linkUrl: this.config.linkUrl\n      });\n    }\n\n    if (type === 'tab' && curSelection.start !== curSelection.end) {\n      var curLineStart = this.getMdValue().slice(0, curSelection.start).lastIndexOf('\\n') + 1;\n      this.setSelection({\n        start: curLineStart,\n        end: curSelection.end\n      });\n    }\n\n    var decorate = getDecorated(curSelection.text, type, decorateOption);\n    var text = decorate.text;\n    var selection = decorate.selection;\n\n    if (decorate.newBlock) {\n      var startLineInfo = getLineAndCol(this.getMdValue(), curSelection.start);\n      var col = startLineInfo.col,\n          curLine = startLineInfo.curLine;\n\n      if (col > 0 && curLine.length > 0) {\n        text = \"\\n\" + text;\n\n        if (selection) {\n          selection.start++;\n          selection.end++;\n        }\n      }\n\n      var afterText = startLineInfo.afterText;\n\n      if (curSelection.start !== curSelection.end) {\n        afterText = getLineAndCol(this.getMdValue(), curSelection.end).afterText;\n      }\n\n      if (afterText.trim() !== '' && afterText.substr(0, 2) !== '\\n\\n') {\n        if (afterText.substr(0, 1) !== '\\n') {\n          text += '\\n';\n        }\n\n        text += '\\n';\n      }\n    }\n\n    this.insertText(text, true, selection);\n  }\n  /**\n   * Insert a placeholder, and replace it when the Promise resolved\n   * @param placeholder\n   * @param wait\n   */\n  ;\n\n  _proto.insertPlaceholder = function insertPlaceholder(placeholder, wait) {\n    var _this7 = this;\n\n    this.insertText(placeholder, true);\n    wait.then(function (str) {\n      var text = _this7.getMdValue().replace(placeholder, str);\n\n      _this7.setText(text);\n    });\n  }\n  /**\n   * Insert text\n   * @param {string} value The text will be insert\n   * @param {boolean} replaceSelected Replace selected text\n   * @param {Selection} newSelection New selection\n   */\n  ;\n\n  _proto.insertText = function insertText(value, replaceSelected, newSelection) {\n    if (value === void 0) {\n      value = '';\n    }\n\n    if (replaceSelected === void 0) {\n      replaceSelected = false;\n    }\n\n    var text = this.state.text;\n    var selection = this.getSelection();\n    var beforeContent = text.slice(0, selection.start);\n    var afterContent = text.slice(replaceSelected ? selection.end : selection.start, text.length);\n    this.setText(beforeContent + value + afterContent, undefined, newSelection ? {\n      start: newSelection.start + beforeContent.length,\n      end: newSelection.end + beforeContent.length\n    } : {\n      start: selection.start,\n      end: selection.start\n    });\n  }\n  /**\n   * Set text, and trigger onChange event\n   * @param {string} value\n   * @param {any} event\n   */\n  ;\n\n  _proto.setText = function setText(value, event, newSelection) {\n    var _this8 = this;\n\n    if (value === void 0) {\n      value = '';\n    }\n\n    var _this$config$onChange = this.config.onChangeTrigger,\n        onChangeTrigger = _this$config$onChange === void 0 ? 'both' : _this$config$onChange;\n    var text = value.replace(/↵/g, '\\n');\n\n    if (this.state.text === value) {\n      return;\n    }\n\n    this.setState({\n      text: text\n    });\n\n    if (this.props.onChange && (onChangeTrigger === 'both' || onChangeTrigger === 'beforeRender')) {\n      this.props.onChange({\n        text: text,\n        html: this.getHtmlValue()\n      }, event);\n    }\n\n    this.emitter.emit(this.emitter.EVENT_CHANGE, value, event, typeof event === 'undefined');\n\n    if (newSelection) {\n      setTimeout(function () {\n        return _this8.setSelection(newSelection);\n      });\n    }\n\n    if (!this.hasContentChanged) {\n      this.hasContentChanged = true;\n    }\n\n    var rendering = this.renderHTML(text);\n\n    if (onChangeTrigger === 'both' || onChangeTrigger === 'afterRender') {\n      rendering.then(function () {\n        if (_this8.props.onChange) {\n          _this8.props.onChange({\n            text: _this8.state.text,\n            html: _this8.getHtmlValue()\n          }, event);\n        }\n      });\n    }\n  }\n  /**\n   * Get text value\n   * @return {string}\n   */\n  ;\n\n  _proto.getMdValue = function getMdValue() {\n    return this.state.text;\n  }\n  /**\n   * Get rendered html\n   * @returns {string}\n   */\n  ;\n\n  _proto.getHtmlValue = function getHtmlValue() {\n    if (typeof this.state.html === 'string') {\n      return this.state.html;\n    }\n\n    if (this.nodeMdPreview.current) {\n      return this.nodeMdPreview.current.getHtml();\n    }\n\n    return '';\n  }\n  /**\n   * Listen keyboard events\n   */\n  ;\n\n  /**\n   * Listen keyboard events\n   * @param {KeyboardEventListener} data\n   */\n  _proto.onKeyboard = function onKeyboard(data) {\n    var _this9 = this;\n\n    if (Array.isArray(data)) {\n      data.forEach(function (it) {\n        return _this9.onKeyboard(it);\n      });\n      return;\n    }\n\n    if (!this.keyboardListeners.includes(data)) {\n      this.keyboardListeners.push(data);\n    }\n  }\n  /**\n   * Unlisten keyboard events\n   * @param {KeyboardEventListener} data\n   */\n  ;\n\n  _proto.offKeyboard = function offKeyboard(data) {\n    var _this10 = this;\n\n    if (Array.isArray(data)) {\n      data.forEach(function (it) {\n        return _this10.offKeyboard(it);\n      });\n      return;\n    }\n\n    var index = this.keyboardListeners.indexOf(data);\n\n    if (index >= 0) {\n      this.keyboardListeners.splice(index, 1);\n    }\n  };\n\n  _proto.handleKeyDown = function handleKeyDown(e) {\n    // 遍历监听数组，找找有没有被监听\n    for (var _iterator3 = _createForOfIteratorHelperLoose(this.keyboardListeners), _step3; !(_step3 = _iterator3()).done;) {\n      var it = _step3.value;\n\n      if (isKeyMatch(e, it)) {\n        e.preventDefault();\n        it.callback(e);\n        return;\n      }\n    } // 如果没有，触发默认事件\n\n\n    this.emitter.emit(this.emitter.EVENT_KEY_DOWN, e);\n  };\n\n  _proto.getEventType = function getEventType(event) {\n    switch (event) {\n      case 'change':\n        return this.emitter.EVENT_CHANGE;\n\n      case 'fullscreen':\n        return this.emitter.EVENT_FULL_SCREEN;\n\n      case 'viewchange':\n        return this.emitter.EVENT_VIEW_CHANGE;\n\n      case 'keydown':\n        return this.emitter.EVENT_KEY_DOWN;\n\n      case 'blur':\n        return this.emitter.EVENT_BLUR;\n\n      case 'focus':\n        return this.emitter.EVENT_FOCUS;\n\n      case 'scroll':\n        return this.emitter.EVENT_SCROLL;\n    }\n  }\n  /**\n   * Listen events\n   * @param {EditorEvent} event Event type\n   * @param {any} cb Callback\n   */\n  ;\n\n  _proto.on = function on(event, cb) {\n    var eventType = this.getEventType(event);\n\n    if (eventType) {\n      this.emitter.on(eventType, cb);\n    }\n  }\n  /**\n   * Unlisten events\n   * @param {EditorEvent} event Event type\n   * @param {any} cb Callback\n   */\n  ;\n\n  _proto.off = function off(event, cb) {\n    var eventType = this.getEventType(event);\n\n    if (eventType) {\n      this.emitter.off(eventType, cb);\n    }\n  }\n  /**\n   * Set view property\n   * Can show or hide: editor, preview, menu\n   * @param {object} to\n   */\n  ;\n\n  _proto.setView = function setView(to) {\n    var _this11 = this;\n\n    var newView = _extends({}, this.state.view, to);\n\n    this.setState({\n      view: newView\n    }, function () {\n      _this11.emitter.emit(_this11.emitter.EVENT_VIEW_CHANGE, newView);\n    });\n  }\n  /**\n   * Get view property\n   * @return {object}\n   */\n  ;\n\n  _proto.getView = function getView() {\n    return _extends({}, this.state.view);\n  }\n  /**\n   * Enter or exit full screen\n   * @param {boolean} enable\n   */\n  ;\n\n  _proto.fullScreen = function fullScreen(enable) {\n    var _this12 = this;\n\n    if (this.state.fullScreen !== enable) {\n      this.setState({\n        fullScreen: enable\n      }, function () {\n        _this12.emitter.emit(_this12.emitter.EVENT_FULL_SCREEN, enable);\n      });\n    }\n  }\n  /**\n   * Is full screen\n   * @return {boolean}\n   */\n  ;\n\n  _proto.isFullScreen = function isFullScreen() {\n    return this.state.fullScreen;\n  };\n\n  _proto.uploadWithDataTransfer = function uploadWithDataTransfer(items) {\n    var _this13 = this;\n\n    var onImageUpload = this.config.onImageUpload;\n\n    if (!onImageUpload) {\n      return;\n    }\n\n    var queue = [];\n    Array.prototype.forEach.call(items, function (it) {\n      if (it.kind === 'file' && it.type.includes('image')) {\n        var file = it.getAsFile();\n\n        if (file) {\n          var placeholder = getUploadPlaceholder(file, onImageUpload);\n          queue.push(Promise.resolve(placeholder.placeholder));\n          placeholder.uploaded.then(function (str) {\n            var text = _this13.getMdValue().replace(placeholder.placeholder, str);\n\n            var offset = str.length - placeholder.placeholder.length; // 计算出替换后的光标位置\n\n            var selection = _this13.getSelection();\n\n            _this13.setText(text, undefined, {\n              start: selection.start + offset,\n              end: selection.start + offset\n            });\n          });\n        }\n      } else if (it.kind === 'string' && it.type === 'text/plain') {\n        queue.push(new Promise(function (resolve) {\n          return it.getAsString(resolve);\n        }));\n      }\n    });\n    Promise.all(queue).then(function (res) {\n      var text = res.join('');\n\n      var selection = _this13.getSelection();\n\n      _this13.insertText(text, true, {\n        start: selection.start === selection.end ? text.length : 0,\n        end: text.length\n      });\n    });\n  };\n\n  _proto.render = function render() {\n    var _this14 = this;\n\n    var showHideMenu = this.config.canView && this.config.canView.hideMenu && !this.config.canView.menu;\n    var _this$state = this.state,\n        view = _this$state.view,\n        fullScreen = _this$state.fullScreen;\n\n    var getPluginAt = function getPluginAt(at) {\n      return _this14.state.plugins[at] || [];\n    };\n\n    var isShowMenu = !!view.menu;\n    var id = this.props.id;\n    var editorId = id ? id + \"_md\" : undefined;\n    var previewerId = id ? id + \"_html\" : undefined;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: id,\n      className: \"rc-md-editor \" + (fullScreen ? 'full' : ''),\n      style: this.props.style,\n      onKeyDown: this.handleKeyDown,\n      onDrop: this.handleDrop\n    }, /*#__PURE__*/React.createElement(NavigationBar, {\n      visible: isShowMenu,\n      left: getPluginAt('left'),\n      right: getPluginAt('right')\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"editor-container\"\n    }, showHideMenu && /*#__PURE__*/React.createElement(ToolBar, null, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"button button-type-menu\",\n      title: isShowMenu ? 'hidden menu' : 'show menu',\n      onClick: this.handleToggleMenu\n    }, /*#__PURE__*/React.createElement(Icon, {\n      type: \"expand-\" + (isShowMenu ? 'less' : 'more')\n    }))), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"section sec-md \" + (view.md ? 'visible' : 'in-visible')\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      id: editorId,\n      ref: this.nodeMdText,\n      name: this.props.name || 'textarea',\n      autoFocus: this.props.autoFocus,\n      placeholder: this.props.placeholder,\n      readOnly: this.props.readOnly,\n      value: this.state.text,\n      className: \"section-container input \" + (this.config.markdownClass || ''),\n      wrap: \"hard\",\n      onChange: this.handleChange,\n      onScroll: this.handleInputScroll,\n      onMouseOver: function onMouseOver() {\n        return _this14.shouldSyncScroll = 'md';\n      },\n      onKeyDown: this.handleEditorKeyDown,\n      onPaste: this.handlePaste,\n      onFocus: this.handleFocus,\n      onBlur: this.handleBlur\n    })), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"section sec-html \" + (view.html ? 'visible' : 'in-visible')\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: previewerId,\n      className: \"section-container html-wrap\",\n      ref: this.nodeMdPreviewWrapper,\n      onMouseOver: function onMouseOver() {\n        return _this14.shouldSyncScroll = 'html';\n      },\n      onScroll: this.handlePreviewScroll\n    }, /*#__PURE__*/React.createElement(HtmlRender, {\n      html: this.state.html,\n      className: this.config.htmlClass,\n      ref: this.nodeMdPreview\n    })))));\n  };\n\n  return Editor;\n}(React.Component);\n\nEditor.plugins = [];\nEditor.addLocale = i18n.add.bind(i18n);\nEditor.useLocale = i18n.setCurrent.bind(i18n);\nEditor.getLocale = i18n.getCurrent.bind(i18n);\nexport default Editor;"],"mappings":"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"},"metadata":{},"sourceType":"module"}